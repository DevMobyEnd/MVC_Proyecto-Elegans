document.addEventListener("DOMContentLoaded",function(){var e;function t(e){let t=document.createElement("div");return t.textContent=e,t.innerHTML}function n(e){console.log("Cargando contenido desde:",e),fetch(e).then(e=>{if(!e.ok)throw Error("Network response was not ok");return e.text()}).then(t=>{console.log("Contenido cargado correctamente");let n=document.getElementById("profileContent");"/Myperfil.php"===e?window.location.reload():(n.innerHTML="",n.insertAdjacentHTML("beforeend",t),console.log("Contenido de perfil actualizado"),r(),e.includes("editarperfil.php")&&o())}).catch(e=>console.error("Error al cargar el contenido:",e))}function r(){console.log("Agregando eventos en profileContent");let e=document.getElementById("editProfileBtn");e?(console.log("editProfileBtn encontrado"),e.addEventListener("click",function(){console.log("Bot\xf3n de editar perfil clickeado"),n("../Views/layout/Myperfil/partials/editarperfil.php")})):console.log("editProfileBtn no encontrado");let t=document.getElementById("backToProfile");t&&t.addEventListener("click",function(){console.log("Bot\xf3n de volver al perfil clickeado"),n("/Myperfil.php")})}function o(){let e=1;function t(e){document.querySelectorAll(".register-step").forEach(e=>e.style.display="none"),document.getElementById(`step${e}`).style.display="block";let t=document.getElementById("prevBtn"),n=document.getElementById("nextBtn"),r=document.getElementById("updateButton");t&&(t.style.display=e>1?"inline-block":"none"),n&&(n.style.display=e<2?"inline-block":"none"),r&&(r.style.display=2===e?"inline-block":"none")}let r=document.getElementById("nextBtn"),o=document.getElementById("prevBtn");r&&r.addEventListener("click",function n(){e<2&&t(++e)}),o&&o.addEventListener("click",function n(){e>1&&t(--e)}),t(1);let l=document.getElementById("editProfileForm");l&&l.addEventListener("submit",function(e){e.preventDefault();let t=new FormData(l),r={},o=!1;t.forEach((e,t)=>{let n=l.elements[t];"file"===n.type?n.files.length>0&&(r[t]=e,o=!0):n.value!==n.defaultValue&&(r[t]=e,o=!0)}),o?fetch("/Myperfil.php",{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(r)}).then(e=>e.json()).then(e=>{e.success?(alert("Perfil actualizado con \xe9xito"),n("/Myperfil.php")):alert("Error al actualizar el perfil: "+e.message)}).catch(e=>{console.error("Error:",e),alert("Ocurri\xf3 un error al procesar la solicitud")}):alert("No se han realizado cambios en el perfil")})}console.log("Script cargado correctamente"),document.cookie="name=value; SameSite=None; Secure",window.location.pathname.includes("/Views/layout/Myperfil/partials/editarperfil.php")&&o(),r();let l=e=>{let t=e.target.value,n=0,r=document.getElementById("password-strength"),o=document.getElementById("passwordHelp");t.length>=8&&(n+=20),t.match(/[a-z]+/)&&(n+=20),t.match(/[A-Z]+/)&&(n+=20),t.match(/[0-9]+/)&&(n+=20),t.match(/[$@#&!]+/)&&(n+=20),r?(r.style.width=n+"%",r.setAttribute("aria-valuenow",n),n<40?(r.className="progress-bar bg-danger",o.textContent="Contrase\xf1a d\xe9bil"):n<60?(r.className="progress-bar bg-warning",o.textContent="Contrase\xf1a moderada"):n<80?(r.className="progress-bar bg-info",o.textContent="Contrase\xf1a fuerte"):(r.className="progress-bar bg-success",o.textContent="Contrase\xf1a muy fuerte")):console.error("Elemento progress-bar no encontrado")},a,i=(e=l,(...t)=>{clearTimeout(a),a=setTimeout(()=>e.apply(null,t),300)}),d=document.getElementById("passwordInput");d?d.addEventListener("input",i):console.error("Elemento passwordInput no encontrado")});