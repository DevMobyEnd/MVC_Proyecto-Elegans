document.addEventListener("DOMContentLoaded",function(){let e=document.getElementById("dbConfigForm");e.addEventListener("submit",function(r){r.preventDefault();let t=e.querySelector("#db_host").value.trim(),o=e.querySelector("#db_name").value.trim(),a=e.querySelector("#db_username").value.trim(),n=e.querySelector("#db_password").value,i=[];if(t||i.push("El host de la base de datos es requerido."),o||i.push("El nombre de la base de datos es requerido."),a||i.push("El usuario de la base de datos es requerido."),i.length>0){Swal.fire({icon:"error",title:"Error de validaci\xf3n",html:i.join("<br>")});return}fetch("/Views/InstallView.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`check_db=1&db_host=${t}&db_name=${o}&db_username=${a}&db_password=${n}`}).then(e=>e.json()).then(r=>{r.exists?Swal.fire({icon:"warning",title:"Base de datos existente",text:"La base de datos ya existe. \xbfDesea continuar y sobrescribirla?",showCancelButton:!0,confirmButtonText:"S\xed, continuar",cancelButtonText:"No, cancelar"}).then(r=>{r.isConfirmed&&e.submit()}):e.submit()}).catch(e=>{console.error("Error:",e),Swal.fire({icon:"error",title:"Error",text:"Ocurri\xf3 un error al verificar la base de datos."})})})});